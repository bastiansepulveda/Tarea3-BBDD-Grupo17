<?php include '../../include/navbar.html'; ?>
<?php include $_SERVER['DOCUMENT_ROOT'].'/callAPI.php'; ?>

<?php
$get_paises = callAPI('GET', 'http://127.0.0.1:5000/api/v1/pais', false);
$response_paises = json_decode($get_paises, true)['paises'];
?>
    <div class='container-fluid'>
        <div class="row p-3">
            <h1>&emsp; &emsp;Insertar Usuario</h1>
        </div>
        <div class="row p-3">
            <div class="col">
                <div class="container shadow-lg rounded m-auto p-5">
                    <form action="php/create_usuario.php" method="POST"> 
                    <!--Se utiliza el método POST para que no se muestren
                    los datos ingresados en la url.
                    Además, a cada input se le agrega el atributo name para ser referenciado en el archivo create.php -->
                        <div class="form-group">
                            <label for="name">Nombre</label>
                            <input type="text" class="form-control" placeholder="Nombre" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="surname">Apellido</label>
                            <input type="text" class="form-control" placeholder="Apellido" id="surname" name="surname">
                        </div>
                        <div class="form-group">
                            <label for="email">Correo Electrónico</label>
                            <input type="email" class="form-control" placeholder="correo@electronico.com" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="pwd">Contraseña</label>
                            <input type="password" class="form-control" placeholder="Contraseña" id="pwd" name="pwd" required>
                        </div>
                        <!-- NOTA: Los valores están en duro para esta tarea. -->
                        <div class="form-group">
                            <label for="country">Seleccione el país</label>
                            <select class="form-control" id="pais" name="pais">
                            <?php foreach($response_paises as $value => $label): ?>
                            <option value = "<?php echo $label['cod_pais']; ?>"> <?php echo $label['nombre_pais']; ?></option>
                            <?php endforeach ?>
                            </select>
                            </div>
                            <div class="form-group">
                                <label for="admin">Administrador</label>
                                <input type="text" class="form-control" placeholder="¿Administrador?" id="Admin" name="Admin" required>
                            </div>
                            <a class="btn btn-secondary mx-3" href="../usuario.html">Volver</a>
                            <button type="submit" class="btn btn-primary">Insertar Usuario</button>
                            </div>

                      </form>
                </div>
            </div>
        </div>
    </div>
</body>

</html>